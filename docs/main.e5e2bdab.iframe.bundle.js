(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./.storybook/preview.js-generated-config-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),esm=__webpack_require__("./node_modules/@storybook/client-logger/dist/esm/index.js"),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(ClientApi.d)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(ClientApi.e)(loader,!1)}));case"parameters":return Object(ClientApi.f)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.b)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.c)(enhancer)}));case"render":return Object(ClientApi.g)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(ClientApi.f)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./generated-stories-entry.js":function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__("./node_modules/@storybook/html/dist/esm/client/index.js").configure)([__webpack_require__("./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.mdx)$"),__webpack_require__("./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx))$")],module,!1)}).call(this,__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./src/stories/viz.css":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,"\n\n.viz {\n    width: 100%;\n    max-width: 600px;\n    margin: 0 auto;\n    text-align: center;\n}\n\n\n.controls {\n    height: 80px;\n    overflow: hidden;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n}\n\n.controls button {\n    padding: 10px;\n    cursor: pointer;\n}\n\n.viz-controls > * {\n    vertical-align: middle;\n    margin-left: 2em;\n}\n\n.viz-container {\n    position: relative;\n    width: 100%;\n    height: 400px;\n    margin: 0 auto;\n    overflow: hidden;\n    border: 1px solid black;\n}\n",""]),module.exports=exports},"./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx))$":function(module,exports,__webpack_require__){var map={"./stories/Vis.stories.ts":"./src/stories/Vis.stories.ts"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx))$"},"./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.mdx)$":function(module,exports,__webpack_require__){var map={"./stories/Introduction.stories.mdx":"./src/stories/Introduction.stories.mdx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.mdx)$"},"./src/stories/Introduction.stories.mdx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_excluded=["components"];function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,_excluded);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.b,{title:"Introduction",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("style",null,"\n  .subheading {\n    --mediumdark: '#999999';\n    font-weight: 900;\n    font-size: 13px;\n    color: #999;\n    letter-spacing: 6px;\n    line-height: 24px;\n    text-transform: uppercase;\n    margin-bottom: 12px;\n    margin-top: 40px;\n  }\n\n  .link-list {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 1fr;\n    row-gap: 10px;\n  }\n\n  .link-item {\n    display: block;\n    padding: 20px 30px 20px 15px;\n    border: 1px solid #00000010;\n    border-radius: 5px;\n    transition: background 150ms ease-out, border 150ms ease-out, transform 150ms ease-out;\n    color: #333333;\n    display: flex;\n    align-items: flex-start;\n  }\n\n  .link-item:hover {\n    border-color: #1EA7FD50;\n    transform: translate3d(0, -3px, 0);\n    box-shadow: rgba(0, 0, 0, 0.08) 0 3px 10px 0;\n  }\n\n  .link-item:active {\n    border-color: #1EA7FD;\n    transform: translate3d(0, 0, 0);\n  }\n\n  .link-item strong {\n    font-weight: 700;\n    display: block;\n    margin-bottom: 2px;\n  }\n  \n  .link-item img {\n    height: 40px;\n    width: 40px;\n    margin-right: 15px;\n    flex: none;\n  }\n\n  .link-item span {\n    font-size: 14px;\n    line-height: 20px;\n  }\n\n\n  \n"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h1",{id:"poweraudio"},"PowerAudio"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"An innovative audio visualization library you can integrate in the web."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{className:"subheading"},"Try"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{className:"link-list"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("a",{className:"link-item",href:"?path=/story/poweraudio-framed-example--framed-example"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("strong",null,"Simple example"),"Try a simple example to see how it looks"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{className:"subheading"},"Install"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"npm"},"Npm"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"Add this library into your project")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-bash"},"npm i --save poweraudio\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",{start:2},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"Import the PowerAudio object from the lib")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// JS ES5\nconst PowerAudio = require('poweraudio');\n// JS ES6/TypeScript\nimport { PowerAudio } from 'poweraudio';\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("h4",{id:"direct-web-import"},"Direct web import"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"Import poweraudio.js in your html")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-html"},'<script src="https://raw.githubusercontent.com/7PH/poweraudio/master/dist/poweraudio.js"><\/script>\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ol",{start:2},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ol"},"You now have a global ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"PowerAudio")," object registered to ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("inlineCode",{parentName:"li"},"window"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("div",{className:"subheading"},"Use"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("p",null,"To start a viz, instantiate a new PowerAudio.Viz object. You have to specify the following options:"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"container: Query selector for where to put the visualization"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("li",{parentName:"ul"},"source: Audio source element (HTMLAudioElement)")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)("code",{parentName:"pre",className:"language-javascript"},"// Create audio element\nconst audio = new Audio('music.mp3');\n// Alternatively: Get audio element from the DOM\n//const audio = document.querySelector('audio');\n\n// Start viz in container with id `viz`\nconst viz = new PowerAudio.Viz({\n    container: '#viz',\n    source: audio,\n});\n\n// Play audio\naudio.play();\n\n// Make the PowerCircle (the big circle at the center of the screen) do a backflip\nviz.flip();\n")))}MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Introduction",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_6__.a,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.b)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},"./src/stories/Vis.stories.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"FramedExample",(function(){return Vis_stories_FramedExample}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./src/stories/viz.css"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.float32-array.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.copy-within.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.every.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.find-index.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.last-index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.reduce-right.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.reverse.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.set.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.some.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.sort.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.subarray.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.to-locale-string.js"),__webpack_require__("./node_modules/core-js/modules/es.typed-array.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array-buffer.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.now.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.get.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var pixi_es=__webpack_require__("./node_modules/pixi.js/lib/pixi.es.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var DisplayObject_DisplayObject=function(_PIXI$Container){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(DisplayObject,_PIXI$Container);var _super=_createSuper(DisplayObject);function DisplayObject(stage,appendGraphics){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DisplayObject),(_this=_super.call(this)).id=void 0,_this.stage=void 0,_this.graphics=void 0,_this.velocity=void 0,_this.acceleration=void 0,_this.friction=void 0,_this.forces=void 0,_this.mass=void 0,appendGraphics=void 0===appendGraphics||appendGraphics,_this.id=DisplayObject.ID++,_this.stage=stage,_this.graphics=void 0,_this.velocity=new pixi_es.c(0,0),_this.acceleration=new pixi_es.c(0,0),_this.friction=new pixi_es.c(0,0),_this.forces={},_this.mass=1,appendGraphics&&(_this.graphics=new pixi_es.b,_this.addChild(_this.graphics)),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DisplayObject,[{key:"setForce",value:function setForce(name,vector){isNaN(vector.x)||isNaN(vector.y)||(this.forces[name]={x:vector.x,y:vector.y})}},{key:"clearForce",value:function clearForce(name){delete this.forces[name]}},{key:"clearForces",value:function clearForces(){this.forces={}}},{key:"setFriction",value:function setFriction(value){"number"==typeof value?this.friction=new pixi_es.c(value,value):this.friction.set(value.x,value.y)}},{key:"update",value:function update(delta){for(var forceName in this.setForce("friction",new pixi_es.c(-this.friction.x*this.velocity.x,-this.friction.y*this.velocity.y)),this.acceleration.set(0,0),this.forces)this.acceleration.x+=this.forces[forceName].x,this.acceleration.y+=this.forces[forceName].y;this.acceleration.x/=this.mass,this.acceleration.y/=this.mass,this.velocity.x+=delta*this.acceleration.x,this.velocity.y+=delta*this.acceleration.y,this.position.x+=delta*this.velocity.x,this.position.y+=delta*this.velocity.y}}]),DisplayObject}(pixi_es.a);function DisplayObjectContainer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=DisplayObjectContainer_getPrototypeOf(object)););return object}function DisplayObjectContainer_setPrototypeOf(o,p){return DisplayObjectContainer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},DisplayObjectContainer_setPrototypeOf(o,p)}function DisplayObjectContainer_createSuper(Derived){var hasNativeReflectConstruct=function DisplayObjectContainer_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=DisplayObjectContainer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=DisplayObjectContainer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return DisplayObjectContainer_possibleConstructorReturn(this,result)}}function DisplayObjectContainer_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function DisplayObjectContainer_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function DisplayObjectContainer_getPrototypeOf(o){return DisplayObjectContainer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},DisplayObjectContainer_getPrototypeOf(o)}DisplayObject_DisplayObject.ID=1;var DisplayObjectContainer=function(_DisplayObject){!function DisplayObjectContainer_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&DisplayObjectContainer_setPrototypeOf(subClass,superClass)}(DisplayObjectContainer,_DisplayObject);var _super=DisplayObjectContainer_createSuper(DisplayObjectContainer);function DisplayObjectContainer(stage){return function DisplayObjectContainer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DisplayObjectContainer),_super.call(this,stage,!1)}return function DisplayObjectContainer_createClass(Constructor,protoProps,staticProps){return protoProps&&DisplayObjectContainer_defineProperties(Constructor.prototype,protoProps),staticProps&&DisplayObjectContainer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(DisplayObjectContainer,[{key:"update",value:function update(delta){_get(DisplayObjectContainer_getPrototypeOf(DisplayObjectContainer.prototype),"update",this).call(this,delta);for(var i=0,j=this.children.length;i<j;++i){var child=this.children[i];child.update&&child.update(delta)}}}]),DisplayObjectContainer}(DisplayObject_DisplayObject);__webpack_require__("./node_modules/core-js/modules/es.parse-int.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js");function Node_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Node_get(){return Node_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=Node_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},Node_get.apply(this,arguments)}function Node_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=Node_getPrototypeOf(object)););return object}function Node_setPrototypeOf(o,p){return Node_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},Node_setPrototypeOf(o,p)}function Node_createSuper(Derived){var hasNativeReflectConstruct=function Node_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=Node_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Node_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Node_possibleConstructorReturn(this,result)}}function Node_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function Node_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Node_getPrototypeOf(o){return Node_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},Node_getPrototypeOf(o)}var Node=function(_DisplayObject){!function Node_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Node_setPrototypeOf(subClass,superClass)}(Node,_DisplayObject);var _super=Node_createSuper(Node);function Node(stage){var _this;return function Node_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Node),(_this=_super.call(this,stage)).color=void 0,_this.radius=2+4*Math.random(),_this.color=16777215*(.5*Math.random()+.5),_this.setFriction(1),_this}return function Node_createClass(Constructor,protoProps,staticProps){return protoProps&&Node_defineProperties(Constructor.prototype,protoProps),staticProps&&Node_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Node,[{key:"update",value:function update(delta){Node_get(Node_getPrototypeOf(Node.prototype),"update",this).call(this,delta);var coef=Math.max(.1,8*this.stage.viz.waveform.averageGain);this.position.x+=delta*this.velocity.x*(coef-1),this.position.y+=delta*this.velocity.y*(coef-1),this.x<0?this.x=this.stage.getWidth():this.x>this.stage.getWidth()&&(this.x=0),this.y<0?this.y=this.stage.getHeight():this.y>this.stage.getHeight()&&(this.y=0),this.redraw()}},{key:"redraw",value:function redraw(){if(void 0!==this.graphics){var value=255*(.5+Math.min(8,64*this.stage.viz.waveform.averageGain)/16)|0,grayscale=parseInt("0x"+(value<<16|value<<8|value).toString(16),16);this.graphics.clear();var auraRadius=6*(this.radius+4*this.stage.viz.waveform.averageGainFirstOrder)*(1-Math.exp(-3*this.stage.viz.waveform.averageGain));this.graphics.lineStyle(4,this.stage.viz.waveform.averageGain>.15?this.color:grayscale,.3),this.graphics.drawCircle(0,0,auraRadius),this.graphics.lineStyle(0),this.graphics.beginFill(this.stage.viz.waveform.averageGain>.15?this.color:grayscale),this.graphics.drawCircle(0,0,this.radius+4*this.stage.viz.waveform.averageGainFirstOrder),this.graphics.endFill()}}}]),Node}(DisplayObject_DisplayObject);function Point_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Point=function(){function Point(){!function Point_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Point)}return function Point_createClass(Constructor,protoProps,staticProps){return protoProps&&Point_defineProperties(Constructor.prototype,protoProps),staticProps&&Point_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Point,null,[{key:"distance",value:function distance(point1,point2){return Math.sqrt(Math.pow(point1.x-point2.x,2)+Math.pow(point1.y-point2.y,2))}}]),Point}();function NodeLinker_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function NodeLinker_get(){return NodeLinker_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=NodeLinker_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},NodeLinker_get.apply(this,arguments)}function NodeLinker_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=NodeLinker_getPrototypeOf(object)););return object}function NodeLinker_setPrototypeOf(o,p){return NodeLinker_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},NodeLinker_setPrototypeOf(o,p)}function NodeLinker_createSuper(Derived){var hasNativeReflectConstruct=function NodeLinker_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=NodeLinker_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NodeLinker_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NodeLinker_possibleConstructorReturn(this,result)}}function NodeLinker_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function NodeLinker_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NodeLinker_getPrototypeOf(o){return NodeLinker_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},NodeLinker_getPrototypeOf(o)}var NodeLinker_NodeLinker=function(_DisplayObject){!function NodeLinker_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NodeLinker_setPrototypeOf(subClass,superClass)}(NodeLinker,_DisplayObject);var _super=NodeLinker_createSuper(NodeLinker);function NodeLinker(stage,nodes){var _this;return function NodeLinker_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NodeLinker),(_this=_super.call(this,stage)).nodeParent=void 0,_this.centerPosition=void 0,_this.nodeParent=nodes,_this.centerPosition=new pixi_es.c(0,0),_this}return function NodeLinker_createClass(Constructor,protoProps,staticProps){return protoProps&&NodeLinker_defineProperties(Constructor.prototype,protoProps),staticProps&&NodeLinker_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NodeLinker,[{key:"update",value:function update(delta){NodeLinker_get(NodeLinker_getPrototypeOf(NodeLinker.prototype),"update",this).call(this,delta);var N=this.nodeParent.children.length,nodeContainer=this.parent;this.centerPosition.x=nodeContainer.circle.position.x,this.centerPosition.y=nodeContainer.circle.position.y;for(var i=0;i<N;i++){var node=this.nodeParent.children[i],angle=Math.atan2(node.position.y-this.centerPosition.y,node.position.x-this.centerPosition.x),dist=Point.distance(node.position,this.centerPosition),fx=1e5*-Math.cos(angle)/dist,fy=1e5*-Math.sin(angle)/dist;node.setForce("tocenter",{x:fx,y:fy});for(var k=i+1;k<N;k++){var otherNode=this.nodeParent.children[k],_dist=Point.distance(node.position,otherNode.position);if(_dist>300)node.clearForce("node_"+otherNode.id),otherNode.clearForce("node_"+node.id);else{var a=Math.atan2(node.position.y-otherNode.position.y,node.position.x-otherNode.position.x),_fx=0,_fy=0;0!=_dist&&(_fx=1e4*Math.cos(a)/_dist,_fy=1e4*Math.sin(a)/_dist),node.setForce("node_"+otherNode.id,new pixi_es.c(-_fx,-_fy)),otherNode.setForce("node_"+node.id,new pixi_es.c(_fx,_fy))}}}this.redraw()}},{key:"redraw",value:function redraw(){if(void 0!==this.graphics){this.graphics.clear(),this.graphics.lineStyle(1,16777215,.2);for(var N=this.nodeParent.children.length,i=0;i<N;++i){var node=this.nodeParent.children[i];Point.distance(node.position,this.centerPosition)>2*this.parent.circle.radius||(this.graphics.moveTo(node.position.x,node.position.y),this.graphics.lineTo(this.centerPosition.x,this.centerPosition.y))}}}}]),NodeLinker}(DisplayObject_DisplayObject);function NodeContainer_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function NodeContainer_setPrototypeOf(o,p){return NodeContainer_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},NodeContainer_setPrototypeOf(o,p)}function NodeContainer_createSuper(Derived){var hasNativeReflectConstruct=function NodeContainer_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=NodeContainer_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=NodeContainer_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return NodeContainer_possibleConstructorReturn(this,result)}}function NodeContainer_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function NodeContainer_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function NodeContainer_getPrototypeOf(o){return NodeContainer_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},NodeContainer_getPrototypeOf(o)}var NodeContainer_NodeContainer=function(_DisplayObjectContain){!function NodeContainer_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&NodeContainer_setPrototypeOf(subClass,superClass)}(NodeContainer,_DisplayObjectContain);var _super=NodeContainer_createSuper(NodeContainer);function NodeContainer(stage,circle){var _this;return function NodeContainer_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NodeContainer),(_this=_super.call(this,stage)).nodes=void 0,_this.circle=void 0,_this.nodes=new DisplayObjectContainer(_this.stage),_this.addChild(_this.nodes),_this.addChildAt(new NodeLinker_NodeLinker(_this.stage,_this.nodes),0),_this.circle=circle,_this}return function NodeContainer_createClass(Constructor,protoProps,staticProps){return protoProps&&NodeContainer_defineProperties(Constructor.prototype,protoProps),staticProps&&NodeContainer_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(NodeContainer,[{key:"populate",value:function populate(){for(var x=10;x<this.stage.getWidth();x+=200)for(var y=10;y<this.stage.getHeight();y+=200)this.addNode(x+12*Math.random(),y+12*Math.random(),0,0)}},{key:"addNode",value:function addNode(x,y,vx,vy){var node=new Node(this.stage);node.position.set(x,y),node.velocity.set(vx,vy),this.nodes.addChild(node)}}]),NodeContainer}(DisplayObjectContainer);__webpack_require__("./node_modules/core-js/modules/es.array.filter.js");function PowerCircle_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function PowerCircle_get(){return PowerCircle_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=PowerCircle_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},PowerCircle_get.apply(this,arguments)}function PowerCircle_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=PowerCircle_getPrototypeOf(object)););return object}function PowerCircle_setPrototypeOf(o,p){return PowerCircle_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},PowerCircle_setPrototypeOf(o,p)}function PowerCircle_createSuper(Derived){var hasNativeReflectConstruct=function PowerCircle_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=PowerCircle_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=PowerCircle_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return PowerCircle_possibleConstructorReturn(this,result)}}function PowerCircle_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function PowerCircle_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function PowerCircle_getPrototypeOf(o){return PowerCircle_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},PowerCircle_getPrototypeOf(o)}pixi_es.e.BlurFilter;var PowerCircle_PowerCircle=function(_DisplayObject){!function PowerCircle_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&PowerCircle_setPrototypeOf(subClass,superClass)}(PowerCircle,_DisplayObject);var _super=PowerCircle_createSuper(PowerCircle);function PowerCircle(stage,baseRadius,centerX,centerY){var _this;return function PowerCircle_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PowerCircle),(_this=_super.call(this,stage)).lineWidth=1,_this.radius=void 0,_this.eyesClosed=!1,_this.targetPosition=new pixi_es.c(0,0),_this.rotationAcceleration=0,_this.rotationVelocity=0,_this.targetRotation=0,_this.targetBaseRotation=0,_this.lastUpdateRandomPosition=0,_this.lastUpdateRandomRotation=0,_this.randomAngle=0,_this.filter=void 0,_this.radius=_this.baseRadius,_this.filter=new pixi_es.e.BlurFilter,_this.filters=[_this.filter],_this.setFriction(1),_this.position.x=centerX,_this.position.y=centerY,_this}return function PowerCircle_createClass(Constructor,protoProps,staticProps){return protoProps&&PowerCircle_defineProperties(Constructor.prototype,protoProps),staticProps&&PowerCircle_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(PowerCircle,[{key:"setBaseRadius",value:function setBaseRadius(baseRadius){this.baseRadius=baseRadius}},{key:"setCenter",value:function setCenter(x,y){this.centerX=x,this.centerY=y}},{key:"update",value:function update(delta){PowerCircle_get(PowerCircle_getPrototypeOf(PowerCircle.prototype),"update",this).call(this,delta),this.eyesClosed=Math.floor(10*Date.now()/1e3)%30==0,this.lineWidth=1+8*this.stage.viz.waveform.averageGainLinearized,this.filter.blur=Math.floor(.2+4*Math.exp(-24*this.stage.viz.waveform.averageGainLinearized)),this.radius=this.baseRadius+100*this.stage.viz.waveform.averageGainLinearized,this.setForce("main",{x:(this.targetPosition.x-this.position.x)*this.stage.viz.waveform.averageGainFirstOrder*16,y:(this.targetPosition.y-this.position.y)*this.stage.viz.waveform.averageGainFirstOrder*16}),Date.now()>800+this.lastUpdateRandomPosition&&(this.randomAngle=2*Math.random()*Math.PI,this.lastUpdateRandomPosition=Date.now()),Date.now()>1400+this.lastUpdateRandomRotation&&(this.targetRotation=2*this.stage.viz.waveform.averageGainFirstOrder*(Math.random()-.5),Math.random()<.05&&this.stage.viz.waveform.averageGainFirstOrder>=.25&&(this.targetBaseRotation-=2*Math.PI),this.lastUpdateRandomRotation=Date.now()),this.rotationAcceleration=(this.targetRotation+this.targetBaseRotation-this.rotation)*this.stage.viz.waveform.averageGainFirstOrder*16,this.rotationAcceleration+=2*-this.rotationVelocity,this.rotationVelocity+=this.rotationAcceleration*delta,this.rotation+=this.rotationVelocity*delta,this.updatePosition(),this.redraw()}},{key:"updatePosition",value:function updatePosition(){var radius=256*this.stage.viz.waveform.averageGainFirstOrder,x=Math.cos(this.randomAngle)*radius,y=Math.sin(this.randomAngle)*radius,mousePos=this.stage.renderer.plugins.interaction.mouse.global,mouseVectorLength=Math.min(radius,Point.distance(mousePos,this.position)),mouseAngle=Math.atan2(mousePos.y-this.position.x,mousePos.x-this.position.y),mouseVectorX=Math.cos(mouseAngle)*mouseVectorLength,mouseVectorY=Math.sin(mouseAngle)*mouseVectorLength;this.targetPosition.x=this.centerX+x+mouseVectorX,this.targetPosition.y=this.centerY+y+mouseVectorY}},{key:"redraw",value:function redraw(){if(void 0!==this.graphics){this.graphics.clear();for(var wave=this.stage.viz.waveform.timeDomainDataSmooth,waveAverage=wave.reduce((function(acc,v){return acc+v}),0)/wave.length,waveMinimum=wave.reduce((function(acc,v){return Math.min(acc,v)}),wave[0]),maxAmplitude=this.radius,points=[],points2=[],i=0,angle=Math.PI/2-.5*Math.PI/wave.length;i<wave.length;++i,angle+=Math.PI/wave.length){var amplitude=Math.max(0,wave[i]-waveMinimum),x=Math.cos(angle)*(this.radius+maxAmplitude*amplitude),y=Math.sin(angle)*(this.radius+maxAmplitude*amplitude),amplitude2=Math.max(0,wave[i]-waveAverage),x2=Math.cos(angle)*(5+this.radius+maxAmplitude*amplitude2),y2=Math.sin(angle)*(5+this.radius+maxAmplitude*amplitude2);points.push({x:x,y:y}),points2.push({x:x2,y:y2})}for(var _i=points.length-1;_i>=0;--_i)points.push({x:-points[_i].x,y:points[_i].y}),points2.push({x:-points2[_i].x,y:points2[_i].y});this.graphics.beginFill(16777215,.02),this.graphics.lineStyle(this.lineWidth,16777215,.2),this.graphics.moveTo(points[0].x,points[0].y);for(var _i2=0,_points=points;_i2<_points.length;_i2++){var point=_points[_i2];this.graphics.lineTo(point.x,point.y)}this.graphics.beginFill(16777215,.2),this.graphics.lineStyle(this.lineWidth,16777215,1),this.graphics.moveTo(points2[0].x,points2[0].y);for(var _i3=0,_points2=points2;_i3<_points2.length;_i3++){var _point=_points2[_i3];this.graphics.lineTo(_point.x,_point.y)}this.graphics.beginFill(1118481,1),this.graphics.lineStyle(this.lineWidth,16777215),this.graphics.drawCircle(0,0,this.radius),this.graphics.endFill(),this.graphics.lineStyle(this.lineWidth,16777215),this.graphics.drawCircle(0,0,this.radius);var eyesSize=this.eyesClosed?.02*this.radius:.1*this.radius,eyesY=.3*-this.radius;this.graphics.lineStyle(1,16777215),this.graphics.beginFill(16777215,1),this.graphics.drawRect(.5*-eyesSize,eyesY-.5*eyesSize,eyesSize,eyesSize),this.graphics.drawRect(.3*this.radius-.5*eyesSize,eyesY-.5*eyesSize,eyesSize,eyesSize)}}},{key:"flip",value:function flip(){this.rotationVelocity=4*-Math.PI,this.targetBaseRotation-=2*Math.PI}}]),PowerCircle}(DisplayObject_DisplayObject);function AnimatedBackground_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function AnimatedBackground_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function AnimatedBackground_setPrototypeOf(o,p){return AnimatedBackground_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},AnimatedBackground_setPrototypeOf(o,p)}function AnimatedBackground_createSuper(Derived){var hasNativeReflectConstruct=function AnimatedBackground_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=AnimatedBackground_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=AnimatedBackground_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return AnimatedBackground_possibleConstructorReturn(this,result)}}function AnimatedBackground_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function AnimatedBackground_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function AnimatedBackground_getPrototypeOf(o){return AnimatedBackground_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},AnimatedBackground_getPrototypeOf(o)}var AnimatedBackground=function(_DisplayObject){!function AnimatedBackground_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&AnimatedBackground_setPrototypeOf(subClass,superClass)}(AnimatedBackground,_DisplayObject);var _super=AnimatedBackground_createSuper(AnimatedBackground);function AnimatedBackground(){return AnimatedBackground_classCallCheck(this,AnimatedBackground),_super.apply(this,arguments)}return function AnimatedBackground_createClass(Constructor,protoProps,staticProps){return protoProps&&AnimatedBackground_defineProperties(Constructor.prototype,protoProps),staticProps&&AnimatedBackground_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(AnimatedBackground,[{key:"redraw",value:function redraw(){if(void 0!==this.graphics){var value=17*(Math.min(50,256*this.stage.viz.waveform.averageGainFirstOrder)/50)|0,grayscale=parseInt("0x"+(value<<16|value<<8|value).toString(16),16);this.graphics.clear(),this.graphics.beginFill(grayscale),this.graphics.drawRect(0,0,this.stage.getWidth(),this.stage.getHeight()),this.graphics.endFill()}}}]),AnimatedBackground}(DisplayObject_DisplayObject);function Stage_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Stage_get(){return Stage_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=Stage_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},Stage_get.apply(this,arguments)}function Stage_superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=Stage_getPrototypeOf(object)););return object}function Stage_setPrototypeOf(o,p){return Stage_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},Stage_setPrototypeOf(o,p)}function Stage_createSuper(Derived){var hasNativeReflectConstruct=function Stage_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=Stage_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Stage_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Stage_possibleConstructorReturn(this,result)}}function Stage_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return Stage_assertThisInitialized(self)}function Stage_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Stage_getPrototypeOf(o){return Stage_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},Stage_getPrototypeOf(o)}var Stage_Stage=function(_DisplayObjectContain){!function Stage_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&Stage_setPrototypeOf(subClass,superClass)}(Stage,_DisplayObjectContain);var _super=Stage_createSuper(Stage);function Stage(canvasContainer,viz){var _this;return function Stage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Stage),(_this=_super.call(this,null)).viz=void 0,_this.canvasContainer=void 0,_this.renderer=void 0,_this.lastUpdateDelta=0,_this.lastDelta=0,_this.powerCircle=void 0,_this.viz=viz,_this.canvasContainer=canvasContainer,_this.renderer=pixi_es.d({width:_this.canvasContainer.clientWidth,height:_this.canvasContainer.clientHeight}),_this.canvasContainer.appendChild(_this.renderer.view),_this.renderer.render(Stage_assertThisInitialized(_this)),_this}return function Stage_createClass(Constructor,protoProps,staticProps){return protoProps&&Stage_defineProperties(Constructor.prototype,protoProps),staticProps&&Stage_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Stage,[{key:"getWidth",value:function getWidth(){return this.canvasContainer.clientWidth}},{key:"getHeight",value:function getHeight(){return this.canvasContainer.clientHeight}},{key:"resize",value:function resize(){this.renderer.resize(this.canvasContainer.clientWidth,this.canvasContainer.clientHeight),this.powerCircle&&(this.powerCircle.setBaseRadius(Math.min(this.getWidth(),this.getHeight())/12),this.powerCircle.setCenter(this.getWidth()/2,6*this.getHeight()/10))}},{key:"update",value:function update(){var currentDateMs=Date.now()/1e3;this.lastDelta=currentDateMs-this.lastUpdateDelta,this.lastUpdateDelta=currentDateMs,this.lastDelta>1&&(this.lastDelta=0),Stage_get(Stage_getPrototypeOf(Stage.prototype),"update",this).call(this,this.lastDelta),this.renderer.render(this),requestAnimationFrame(this.update.bind(this))}},{key:"start",value:function start(){for(;this.children.length>0;)this.removeChildAt(0);this.powerCircle=new PowerCircle_PowerCircle(this,Math.min(this.getWidth(),this.getHeight())/12,this.getWidth()/2,6*this.getHeight()/10),this.addChild(this.powerCircle);var nodeContainer=new NodeContainer_NodeContainer(this,this.powerCircle);nodeContainer.populate(),this.addChildAt(nodeContainer,0),this.addChildAt(new AnimatedBackground(this),0),this.run()}},{key:"run",value:function run(){this.lastUpdateDelta=Date.now()/1e3,requestAnimationFrame(this.update.bind(this))}}]),Stage}(DisplayObjectContainer);function Viz_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var Viz_Viz=function(){function Viz(options){var canvasContainer,_this=this;if(function Viz_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Viz),this.options=void 0,this.context=void 0,this.gain=void 0,this.audio=void 0,this.analyser=void 0,this.stage=void 0,this.waveform=void 0,this.lastUpdateDate=void 0,this.options=options,this.waveform={timeDomainData:new Float32Array(Viz.BIN_COUNT),timeDomainDataSmooth:new Float32Array(Viz.BIN_COUNT),minimumGain:0,maximumGain:0,averageGain:0,averageGainLinearized:0,averageGainFirstOrder:0},!(canvasContainer="string"==typeof options.container?document.querySelector(options.container):options.container))throw new Error("Container not found");this.stage=new Stage_Stage(canvasContainer,this),this.stage.start(),new ResizeObserver((function(entries){return _this.onContainerResized()})).observe(canvasContainer),!1!==options.startAnalysis&&this.start()}return function Viz_createClass(Constructor,protoProps,staticProps){return protoProps&&Viz_defineProperties(Constructor.prototype,protoProps),staticProps&&Viz_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Viz,[{key:"start",value:function start(){this.context=new AudioContext,this.gain=this.context.createGain(),this.audio=this.options.source;var audioSource=this.context.createMediaElementSource(this.audio);this.analyser=this.context.createAnalyser(),this.analyser.fftSize=Viz.BIN_COUNT,audioSource.connect(this.gain),this.gain.connect(this.analyser),this.analyser.connect(this.context.destination),this.lastUpdateDate=new Date,this.updateStats()}},{key:"updateStats",value:function updateStats(){var delta=(Date.now()-this.lastUpdateDate.getTime())/1e3;if(delta>1)return this.lastUpdateDate=new Date,void requestAnimationFrame(this.updateStats.bind(this));this.analyser.getFloatTimeDomainData(this.waveform.timeDomainData),this.waveform.averageGain=this.waveform.timeDomainData.reduce((function(prev,curr){return prev+Math.abs(curr)}),0)/this.analyser.frequencyBinCount,this.waveform.minimumGain=this.waveform.timeDomainData.reduce((function(a,b){return Math.min(a,b)}),this.waveform.timeDomainData[0]),this.waveform.maximumGain=this.waveform.timeDomainData.reduce((function(a,b){return Math.max(a,b)}),this.waveform.timeDomainData[0]),this.waveform.averageGainLinearized+=delta*(this.waveform.averageGain>this.waveform.averageGainLinearized?1:-1),this.waveform.averageGainFirstOrder+=.5*(this.waveform.averageGain-this.waveform.averageGainFirstOrder)*delta;for(var index=0;index<this.waveform.timeDomainData.length;++index){var value=this.waveform.timeDomainData[index];value>this.waveform.timeDomainDataSmooth[index]?this.waveform.timeDomainDataSmooth[index]=value:this.waveform.timeDomainDataSmooth[index]+=.5*(value-this.waveform.timeDomainDataSmooth[index])*delta}this.lastUpdateDate=new Date,requestAnimationFrame(this.updateStats.bind(this))}},{key:"onContainerResized",value:function onContainerResized(){this.stage.resize()}},{key:"flip",value:function flip(){var powerCircle=this.stage.powerCircle;if(!powerCircle)throw new Error("Unable to make the PowerCircle flip");powerCircle.flip()}}]),Viz}();Viz_Viz.BIN_COUNT=256;var PowerAudio={Viz:Viz_Viz},Vis_stories_FramedExample=(__webpack_exports__.default={title:"PowerAudio/Framed Example",argTypes:{backgroundColor:{control:"color"}}},function FramedExample(args){return function createViz(_ref){_ref.backgroundColor;var viz,div=document.createElement("div");return div.innerHTML='\n        <div class="viz">\n            <div class="controls">\n                <button class="start-button">Start</button>\n                <div class="viz-controls" style="display: none">\n                    <button class="flip-button">Flip</button>\n                </div>\n            </div>\n            <div class="viz-container">\n\n            </div>\n        </div>\n    ',div.getElementsByClassName("start-button")[0].addEventListener("click",(function(event){event.currentTarget.style.display="none";var audio=new Audio("/music.mp3"),container=div.getElementsByClassName("viz-container")[0];viz=new PowerAudio.Viz({container:container,source:audio}),audio.play();var vizControls=div.getElementsByClassName("viz-controls")[0];vizControls.appendChild(audio),audio.controls=!0,vizControls.style.display="block"})),div.getElementsByClassName("flip-button")[0].addEventListener("click",(function(event){viz.flip()})),div}(args)});Vis_stories_FramedExample.parameters=Object.assign({storySource:{source:"(args) => {\n    return createViz(args);\n}"}},Vis_stories_FramedExample.parameters)},"./src/stories/viz.css":function(module,exports,__webpack_require__){var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./src/stories/viz.css");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./storybook-init-framework-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/@storybook/html/dist/esm/client/index.js")},0:function(module,exports,__webpack_require__){__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_require__("./storybook-init-framework-entry.js"),__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/frameworks/common/config.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/frameworks/html/config.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/html/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-links/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/preset/addArgs.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-backgrounds/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-backgrounds/dist/esm/preset/addParameter.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-measure/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-outline/dist/esm/preset/addDecorator.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-interactions/dist/esm/preset/argsEnhancers.js-generated-config-entry.js"),__webpack_require__("./.storybook/preview.js-generated-config-entry.js"),module.exports=__webpack_require__("./generated-stories-entry.js")},1:function(module,exports){}},[[0,5,6]]]);